# WebDAV服务器

这是一个基于PHP的WebDAV服务器，支持用户认证和文件管理功能。

## 系统要求

- **PHP版本**: 7.0.0 - 8.3.x
- PDO SQLite 扩展
- 支持伪静态的Web服务器（Apache/Nginx）
- 可写权限的目录

## 安装说明

1. 下载源码并解压到网站目录
2. **PHP版本检查**: 确保您的PHP版本为 7.0.0 或更高
3. 检查PDO SQLite扩展是否已启用
4. 确保 `db` 和 `storage` 目录具有可写权限
5. 访问 `install.php` 开始安装
6. 按照安装向导设置管理员账号和基础目录
7. 安装完成后，您可以访问 `login.php` 登录并管理用户和设置

**注意**：如果需要重新安装程序，请删除 `install.lock` 文件后再次访问 `install.php`

## 功能特点

- 基于SQLite数据库的用户管理
- 管理员可以添加、删除和修改用户
- 支持WebDAV协议，可与各种客户端兼容
- 安全的密码存储（使用PHP密码哈希）
- 随机生成的数据库文件名和存储目录

## 使用方法

### 管理后台

访问 `login.php` 并使用管理员账号登录，您可以：

- 修改您的用户名和密码
- 管理其他用户账号
- 查看WebDAV连接信息

### WebDAV访问

您可以使用以下信息连接到WebDAV服务：

- WebDAV地址：`http://您的域名/webdav.php`
- 用户名：您的用户名
- 密码：您的密码

支持的客户端包括：

- Windows资源管理器、RaiDrive
- macOS Finder
- 各种WebDAV客户端应用

## 安全说明

- 所有密码都使用PHP的`password_hash`函数进行加密存储
- 数据库文件名随机生成，提高安全性
- 存储目录使用随机名称，可自定义

## 故障排除

### 常见问题

#### 1. 安装页面无法访问
- **PHP版本兼容性**: 确保您的PHP版本为 7.0.0 或更高
- 检查是否启用了PDO SQLite扩展
- 确认 `db` 和 `storage` 目录有写入权限

#### 2. 文件上传失败
- 检查PHP配置中的 `upload_max_filesize` 和 `post_max_size`
- 确保目标目录有写入权限
- 检查磁盘空间是否充足

#### 3. WebDAV连接问题
- 确保WebDAV客户端使用正确的用户名和密码
- 检查服务器是否支持HTTP基本认证
- 验证防火墙设置是否允许WebDAV端口通信

#### 4. PHP版本相关错误
- **错误**: `password_hash()` 函数未找到 - 需要PHP 5.5.0+
- **错误**: `PDO` 类未找到 - 需要启用PDO SQLite扩展
- **错误**: 语法解析错误 - 检查PHP版本是否在支持范围内（7.0.0-8.3.x）